<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>the normalize library &mdash; normalize 0.0.4 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="normalize 0.0.4 documentation" href="#" />
    <link rel="next" title="the scope and purpose of normalize" href="scope.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="scope.html" title="the scope and purpose of normalize"
             accesskey="N">next</a> |</li>
        <li><a href="#">normalize 0.0.4 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="the-normalize-library">
<h1>the <tt class="docutils literal"><span class="pre">normalize</span></tt> library<a class="headerlink" href="#the-normalize-library" title="Permalink to this headline">¶</a></h1>
<p>The <tt class="docutils literal"><span class="pre">normalize</span></tt> package is primarily for writing &#8220;plain old data
structures&#8221; to wrap data from network sources (typically JSON) in
python objects, use them in python, and frequently send them back.
It is also a useful generic class builder which can be leveraged for
interesting and powerful meta-programming.</p>
<p>Put simply, you write python classes and declare your assumptions
about the data structures you&#8217;re dealing with, feed in input data and
you get regular python objects back which have attributes which you
can use naturally.
You can then perform basic operations with the objects, such as make
changes to them and convert them back, or compare them to another
version using the rich comparison API.
You can also construct the objects &#8216;natively&#8217; using regular python
keyword/value constructors or by passing a <tt class="docutils literal"><span class="pre">dict</span></tt> as the first
argument.</p>
<p>It is very similar in scope to the <tt class="docutils literal"><span class="pre">remoteobjects</span></tt> and
<tt class="docutils literal"><span class="pre">schematics</span></tt> packages on PyPI, and may in time evolve to include all
the features of those packages.</p>
<p>Contents of this manual:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="scope.html">the scope and purpose of <tt class="docutils literal"><span class="pre">normalize</span></tt></a><ul>
<li class="toctree-l2"><a class="reference internal" href="scope.html#what-s-in-a-name">What&#8217;s in a name?</a></li>
<li class="toctree-l2"><a class="reference internal" href="scope.html#what-s-wrong-with-collections-namedtuple-or-regular-python-objects">What&#8217;s wrong with <tt class="docutils literal"><span class="pre">collections.namedtuple</span></tt>?  Or regular python objects?</a></li>
<li class="toctree-l2"><a class="reference internal" href="scope.html#what-s-wrong-with-schematics">What&#8217;s wrong with <tt class="docutils literal"><span class="pre">schematics</span></tt>?</a></li>
<li class="toctree-l2"><a class="reference internal" href="scope.html#so-what-is-normalize-really">So, what is <tt class="docutils literal"><span class="pre">normalize</span></tt>, really?</a></li>
<li class="toctree-l2"><a class="reference internal" href="scope.html#what-about-higher-normalization-forms-3nf-etc">What about higher normalization forms?  3NF etc?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="intro.html">An introduction to using <tt class="docutils literal"><span class="pre">normalize</span></tt></a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro.html#basic-records-and-properties">Basic Records and Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#property-type-coercion">Property Type Coercion</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#property-defaults">Property Defaults</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#lazy-evaluation">Lazy Evaluation</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#properties-which-are-records">Properties which are Records</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#properties-which-are-lists-of-records">Properties which are Lists of Records</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#referring-to-fields-within-records">Referring to fields within Records</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#comparing-object-structures">Comparing object structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#collections-and-primary-keys">Collections and primary keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#marshaling-to-and-from-json">Marshaling to and from JSON</a><ul>
<li class="toctree-l3"><a class="reference internal" href="intro.html#customizing-json-conversion">Customizing JSON Conversion</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#custom-visitor-classes">Custom Visitor Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#gotchas">Gotchas</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="property.html"><tt class="docutils literal"><span class="pre">normalize.property</span></tt> reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="property.html#standard-property-behavior">Standard Property behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="property.html#property-flavors">Property Flavors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="property.html#roproperty"><tt class="docutils literal"><span class="pre">ROProperty</span></tt></a></li>
<li class="toctree-l3"><a class="reference internal" href="property.html#lazyproperty"><tt class="docutils literal"><span class="pre">LazyProperty</span></tt></a></li>
<li class="toctree-l3"><a class="reference internal" href="property.html#safeproperty"><tt class="docutils literal"><span class="pre">SafeProperty</span></tt></a></li>
<li class="toctree-l3"><a class="reference internal" href="property.html#slow-property-types-lazysafeproperty-rolazyproperty">&#8220;Slow&#8221; Property types: <tt class="docutils literal"><span class="pre">LazySafeProperty</span></tt>, <tt class="docutils literal"><span class="pre">ROLazyProperty</span></tt></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="property.html#typed-properties">Typed Properties</a><ul>
<li class="toctree-l3"><a class="reference internal" href="property.html#supplied-types-intproperty-stringproperty-etc">Supplied types: <tt class="docutils literal"><span class="pre">IntProperty</span></tt>, <tt class="docutils literal"><span class="pre">StringProperty</span></tt>, etc</a></li>
<li class="toctree-l3"><a class="reference internal" href="property.html#creating-your-own-domain-specific-property-types">Creating your own domain-specific property types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="property.html#property-subclasses">Property subclasses</a><ul>
<li class="toctree-l3"><a class="reference internal" href="property.html#listproperty"><tt class="docutils literal"><span class="pre">ListProperty</span></tt></a></li>
<li class="toctree-l3"><a class="reference internal" href="property.html#jsonproperty"><tt class="docutils literal"><span class="pre">JsonProperty</span></tt></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="record.html"><tt class="docutils literal"><span class="pre">normalize.record</span></tt> reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="record.html#standard-record-behavior">Standard <tt class="docutils literal"><span class="pre">Record</span></tt> behavior</a><ul>
<li class="toctree-l3"><a class="reference internal" href="record.html#constructor">Constructor</a></li>
<li class="toctree-l3"><a class="reference internal" href="record.html#pickle-api">Pickle API</a></li>
<li class="toctree-l3"><a class="reference internal" href="record.html#stringification">Stringification</a></li>
<li class="toctree-l3"><a class="reference internal" href="record.html#hashing-and-record-identity">Hashing and Record Identity</a></li>
<li class="toctree-l3"><a class="reference internal" href="record.html#comparison">Comparison</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="record.html#record-flavors">Record Flavors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="record.html#jsonrecord"><tt class="docutils literal"><span class="pre">JsonRecord</span></tt></a></li>
<li class="toctree-l3"><a class="reference internal" href="record.html#collection"><tt class="docutils literal"><span class="pre">Collection</span></tt></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="coll.html"><tt class="docutils literal"><span class="pre">normalize.coll</span></tt> reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="coll.html#collection-common-features">Collection common features</a></li>
<li class="toctree-l2"><a class="reference internal" href="coll.html#listcollection"><tt class="docutils literal"><span class="pre">ListCollection</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="coll.html#dictcollection"><tt class="docutils literal"><span class="pre">DictCollection</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="coll.html#complex-collections">&#8216;Complex&#8217; Collections</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="selector.html"><tt class="docutils literal"><span class="pre">normalize.selector</span></tt> reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="diff.html"><tt class="docutils literal"><span class="pre">normalize.diff</span></tt> reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="visitor.html"><tt class="docutils literal"><span class="pre">normalize.visitor</span></tt> reference</a></li>
</ul>
</div>
<div class="section" id="module-normalize">
<span id="module-exports"></span><h2>Module Exports<a class="headerlink" href="#module-normalize" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="normalize.FieldSelector">
<em class="property">class </em><tt class="descclassname">normalize.</tt><tt class="descname">FieldSelector</tt><big>(</big><em>other=None</em><big>)</big><a class="headerlink" href="#normalize.FieldSelector" title="Permalink to this definition">¶</a></dt>
<dd><p>A way to refer to fields/record/properties within a data structure.</p>
<p>Properties/Indicies are tracked as elements in a list:
* A string specifies an attribute of an object.
* An integer specifies an index into a collection.
* &#8216;None&#8217; specifies the full collection.</p>
<dl class="method">
<dt id="normalize.FieldSelector.extend">
<tt class="descname">extend</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#normalize.FieldSelector.extend" title="Permalink to this definition">¶</a></dt>
<dd><p>Extends this field selector with another FieldSelector</p>
</dd></dl>

<dl class="method">
<dt id="normalize.FieldSelector.get">
<tt class="descname">get</tt><big>(</big><em>record</em><big>)</big><a class="headerlink" href="#normalize.FieldSelector.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies this FieldSelector to the specified Record to get the
field/property/record specified by this FieldSelector</p>
</dd></dl>

<dl class="method">
<dt id="normalize.FieldSelector.post">
<tt class="descname">post</tt><big>(</big><em>record</em>, <em>value</em><big>)</big><a class="headerlink" href="#normalize.FieldSelector.post" title="Permalink to this definition">¶</a></dt>
<dd><p>auto-vivifying version of &#8216;put&#8217;; if properties are not found along
the path, attempts are made to set them to empty values.</p>
<p>Returns the number of values set; may be 0 if there is &#8216;None&#8217; in the
selector and there were no existing items in that collection.</p>
</dd></dl>

<dl class="method">
<dt id="normalize.FieldSelector.put">
<tt class="descname">put</tt><big>(</big><em>record</em>, <em>value</em><big>)</big><a class="headerlink" href="#normalize.FieldSelector.put" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the field referenced by this field selector for the given Record
with the given value.</p>
<p>If put() is going to be called on the same Record from
multiple/different FieldSelectors, then put() needs to called in
the sorted order of the FieldSelectors.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="normalize.from_json">
<tt class="descclassname">normalize.</tt><tt class="descname">from_json</tt><big>(</big><em>record_type</em>, <em>json_struct</em><big>)</big><a class="headerlink" href="#normalize.from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>JSON marshall in function: a &#8216;visitor&#8217; function which looks for JSON
types/hints but does not require them.</p>
<p>&#64;param json_struct a loaded (via <tt class="docutils literal"><span class="pre">json.loads</span></tt>) data structure
&#64;param record_type a Record object to load items into</p>
</dd></dl>

<dl class="attribute">
<dt id="normalize.JsonProperty">
<tt class="descclassname">normalize.</tt><tt class="descname">JsonProperty</tt><a class="headerlink" href="#normalize.JsonProperty" title="Permalink to this definition">¶</a></dt>
<dd><p>Object property wrapper for record json data</p>
</dd></dl>

<dl class="class">
<dt id="normalize.JsonRecord">
<em class="property">class </em><tt class="descclassname">normalize.</tt><tt class="descname">JsonRecord</tt><big>(</big><em>json_data=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#normalize.JsonRecord" title="Permalink to this definition">¶</a></dt>
<dd><p>Version of a Record which deals primarily in JSON form.</p>
<p>This means:</p>
<ol class="arabic simple">
<li>The first argument to the constructor is assumed to be a JSON data
dictionary, and passed through the class&#8217; <tt class="docutils literal"><span class="pre">json_to_initkwargs</span></tt>
method before being used to set actual properties</li>
<li>Unknown keys are permitted, and saved in the &#8220;unknown_json_keys&#8221;
property, which is merged back on output (ie, calling <tt class="docutils literal"><span class="pre">.json_data()</span></tt>
or <tt class="docutils literal"><span class="pre">to_json()</span></tt>) #TODO</li>
</ol>
<dl class="classmethod">
<dt id="normalize.JsonRecord.from_json">
<em class="property">classmethod </em><tt class="descname">from_json</tt><big>(</big><em>json_data</em><big>)</big><a class="headerlink" href="#normalize.JsonRecord.from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>This method can be overridden to specialize how the class is loaded
when marshalling in; however beware that it is not invoked when the
caller uses the <tt class="docutils literal"><span class="pre">from_json()</span></tt> function directly.</p>
</dd></dl>

<dl class="classmethod">
<dt id="normalize.JsonRecord.json_to_initkwargs">
<em class="property">classmethod </em><tt class="descname">json_to_initkwargs</tt><big>(</big><em>json_data</em>, <em>kwargs</em><big>)</big><a class="headerlink" href="#normalize.JsonRecord.json_to_initkwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Subclassing hook to specialize how JSON data is converted
to keyword arguments</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="normalize.JsonRecordList">
<em class="property">class </em><tt class="descclassname">normalize.</tt><tt class="descname">JsonRecordList</tt><big>(</big><em>json_data=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#normalize.JsonRecordList" title="Permalink to this definition">¶</a></dt>
<dd><p>Version of a RecordList which deals primarily in JSON</p>
</dd></dl>

<dl class="attribute">
<dt id="normalize.LazyProperty">
<tt class="descclassname">normalize.</tt><tt class="descname">LazyProperty</tt><a class="headerlink" href="#normalize.LazyProperty" title="Permalink to this definition">¶</a></dt>
<dd><p>This declares a property which has late evaluation using its &#8216;default&#8217;
method.  This type uses the support built-in to python for lazy attribute
setting, which means subsequent attribute assignments will not be prevented
or checked.  See LazySafeProperty for the descriptor version</p>
</dd></dl>

<dl class="function">
<dt id="normalize.make_property_type">
<tt class="descclassname">normalize.</tt><tt class="descname">make_property_type</tt><big>(</big><em>name</em>, <em>base_type=&lt;class 'normalize.property.Property'&gt;</em>, <em>attrs=None</em>, <em>trait_name=None</em>, <em>*default_args</em>, <em>**default_kwargs</em><big>)</big><a class="headerlink" href="#normalize.make_property_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a new Property type, which supplies the given arguments as
defaults to the Property() constructor.  Note: defaults which affect the
property type returned cannot be supplied by this mechanism.</p>
</dd></dl>

<dl class="attribute">
<dt id="normalize.Property">
<tt class="descclassname">normalize.</tt><tt class="descname">Property</tt><a class="headerlink" href="#normalize.Property" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the base class for all property types.  It is a data descriptor,
so care should be taken before adding any SPECIALMETHODS which might change
the way it behaves.</p>
</dd></dl>

<dl class="class">
<dt id="normalize.Record">
<em class="property">class </em><tt class="descclassname">normalize.</tt><tt class="descname">Record</tt><big>(</big><em>init_dict=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#normalize.Record" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for normalize instances</p>
</dd></dl>

<dl class="class">
<dt id="normalize.RecordMeta">
<em class="property">class </em><tt class="descclassname">normalize.</tt><tt class="descname">RecordMeta</tt><a class="headerlink" href="#normalize.RecordMeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Metaclass to reify descriptors properly</p>
</dd></dl>

<dl class="attribute">
<dt id="normalize.SafeProperty">
<tt class="descclassname">normalize.</tt><tt class="descname">SafeProperty</tt><a class="headerlink" href="#normalize.SafeProperty" title="Permalink to this definition">¶</a></dt>
<dd><p>A version of Property which always checks all assignments to
properties</p>
</dd></dl>

<dl class="function">
<dt id="normalize.to_json">
<tt class="descclassname">normalize.</tt><tt class="descname">to_json</tt><big>(</big><em>record</em>, <em>extraneous=True</em><big>)</big><a class="headerlink" href="#normalize.to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>JSON marshall out function: a &#8216;visitor&#8217; function which implements
marshall out, honoring JSON property types/hints but does not require
them.</p>
</dd></dl>

</div>
<div class="section" id="indices-and-tables">
<h2>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference internal" href="py-modindex.html"><em>Module Index</em></a></li>
<li><a class="reference internal" href="search.html"><em>Search Page</em></a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">the <tt class="docutils literal"><span class="pre">normalize</span></tt> library</a><ul>
<li><a class="reference internal" href="#module-normalize">Module Exports</a></li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
</ul>

  <h4>Next topic</h4>
  <p class="topless"><a href="scope.html"
                        title="next chapter">the scope and purpose of <tt class="docutils literal"><span class="pre">normalize</span></tt></a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="scope.html" title="the scope and purpose of normalize"
             >next</a> |</li>
        <li><a href="#">normalize 0.0.4 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Sam Vilain, Hearsay Social.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>